<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="create_run_jar" name="Create Runnable Jar for Project org.example.standalone with Jar-in-Jar Loader">
	<!--ANT 1.7 is required-->
	<!--define folder properties-->
	<property name="main.class" value="org.example.standalone.Main" />
	<property name="project.build.directory" value="${basedir}/target" />
	<property name="dir.buildfile" value="${project.build.directory}" />
	<property name="dir.classes" value="${dir.buildfile}/classes" />
	<property name="dir.lib" value="${dir.buildfile}/libs" />
	<property name="dir.jarfile" value="${dir.buildfile}" />
	<property name="jar.filename" value="fatjar-example.jar" />
	<property name="jar.file" value="${dir.jarfile}/${jar.filename}" />
	<target name="create_run_jar">
		<path id="build-classpath">
			<dirset dir="${dir.lib}">
				<depth max="0"/>
			</dirset>
		</path>

		<manifestclasspath property="lib.list" jarfile="${jar.file}">
			<classpath refid="build-classpath" />
		</manifestclasspath>

		<jar destfile="${jar.file}">
			<manifest>
				<attribute name="Main-Class" value="${main.class}" />
				<attribute name="Class-Path" value="./ ${lib.list}" />
			</manifest>
			<fileset dir="${dir.classes}" />
			<zipfileset dir="${dir.lib}" />
		</jar>
	</target>
</project>
